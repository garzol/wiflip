<!DOCTYPE html>
<!-- saved from url=(0019)http://192.168.0.2/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>wsC3C Rowe Companion</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!--
<link rel="icon" href="https://www.pps4.fr/static/img/icons/favicon.ico">
<link rel="short-icon" href="https://www.pps4.fr/static/img/icons/favicon.ico">
-->

<!--
<link rel="icon" href="./wifliplogo.png">
<link rel="short-icon" href="./wifliplogo.png">
-->
<link rel="icon" href="http://garzol.free.fr/wswiflip/wifliplogo.png">
<link rel="short-icon" href="http://garzol.free.fr/wswiflip/wifliplogo.png">

<link href="bootstrap-5.0.2-dist/css/bootstrap.min.css" rel="stylesheet">
<link href="bootstrap-icons-1.13.1/bootstrap-icons.css" rel="stylesheet">

<script src="bootstrap-5.0.2-dist/js/bootstrap.bundle.min.js"></script>
<script src="./events.js"></script>
<script src="./rscmodels.js"></script>
<script src="./utils.js"></script>
<script src="./dsply.js"></script>
<script src="./gbin.js"></script>
<script src="./variablecols.js"></script>
<script src="./superv.js"></script>
<script src="./gamesettings.js" defer></script>
<script src="leds.js?ts=20251012984901"></script>

<style>
/* Add some basic styling for the chat window */
body {
  /*background-color: black;*/
  /*font-size: 16px;*/
}

/*raw experimentation*/
.textarea {
    transition: height 0.2s ease-in-out;
}

.chat-container {
  width: 400px;
  margin: 0 auto;
  padding: 10px;
}
.chat-messages {
  height: 250px;
  overflow-y: auto;
  border: 1px solid #444;
  padding: 5px;
  margin-bottom: 5px;
}
.user-input {
  display: flex;
  margin-bottom: 20px;
}
.user-input input {
  flex: 1;
  border: 1px solid #444;
  padding: 5px;
}
.user-input button {
  margin-left: 5px;
  background-color: #007bff;
  color: #fff;
  border: none;
  padding: 5px 10px;
  cursor: pointer;
}
.websocket {
  display: flex;
  align-items: center;
  margin-bottom: 5px;
}
.websocket button {
  background-color: #007bff;
  color: #fff;
  border: none;
  padding: 5px 10px;
  cursor: pointer;
}
.websocket .label {
  margin-left: auto;
}

  
</style>

<style>
*{box-sizing: border-box;}
.flexicol{border-collapse:collapse;}
td,th{padding:5px 15px;text-align:left;}
.flexicol,th,td{border:1px solid #000;}
</style>


<link rel="stylesheet" href="leds.css">

<script>
var ws;
var wsm_max_len = 4096; /* bigger length causes uart0 buffer overflow with low speed smart device */

//window.addEventListener( 'offline', function (e) {console.log("offline evt"); connect_onclick()} );
//window.addEventListener( 'error', function (e) {console.log("error", e);} );
//console.log("eventlistener done");

if (!("WebSocket" in window)) {
	alert("Your browser does not support websockets. Choose another one");
}

function update_text(text) {
  //console.log("write text to console "+text);
  var chat_messages = document.getElementById("chat-messages");
  chat_messages.innerHTML += text + '<br>';
  chat_messages.scrollTop = chat_messages.scrollHeight;
}

function update_rconsole(text) {
  var chat_messages = document.getElementById("reprog-messages");
  chat_messages.innerHTML += text + '<br>';
  chat_messages.scrollTop = chat_messages.scrollHeight;
}

function sendmsg_onclick(message) {
  if(ws != null) {
    
    if (message) {
      const b = new Blob([message.buffer]);
      //console.log(message, b);
      ws.send(b, { binary: true });
      //ws.send('YCXQZ', { binary: true });
      	
    }
  }
}

function send_onclick() {
  if(ws != null) {
    var message = document.getElementById("message").value;
    
    if (message) {
      document.getElementById("message").value = "";
      ws.send(message + "\n");
      update_text('<span style="color:navy">' + message + '</span>');
      // You can send the message to the server or process it as needed
    }
  }
}


function connect_onclick() {
  const re_mac4 = new RegExp("^([0-9]|[A-F]){4}$", "i");
  
  console.log("connect_onclick", ws)
  if(ws == null) {
    var hostname = document.getElementById("hostname").value;
    localStorage.setItem("ls-hostname", hostname); 
    if (hostname == null) {
    	hostname = "ws://" + "wiflip_7f96.local" + ":81";
    	}
    else if (hostname == "") {
    	hostname = "ws://" + "wiflip_7f96.local" + ":81";
    }
    else if (checkIp(hostname)) {
     		hostname = "ws://" + hostname + ":81";       	
    }
    else if (re_mac4.test(hostname))
    {
     		hostname = "ws://wiflip_" + hostname + ".local:81";       	
    }
    else {
     		hostname = "ws://" + hostname + ".local:81";       	
    }
    ws = new WebSocket(hostname);
    // Change binary type from "blob" to "arraybuffer"
	//ws.binaryType = "blob";
    update_text("opening websocket " +hostname+"...");
    //console.log("opening websocket "+hostname+ws+ws.url);
    document.getElementById("ws_state").innerHTML = "CONNECTING";
    ws.onopen = ws_onopen;
    ws.onclose = ws_onclose;
    ws.onmessage = ws_onmessage;
	ws.onerror = ws_onerror;
	
  } else {
	console.log("In connectonclick, call close websocket ");
	try {
		//ws.onopen = null;
		ws.onclose = ws_oncloseforced;
		//ws.onmessage = null;
		//ws.onerror = ws_onerror;
	    ws.close(3001, "zobi la mouche");
	    //ws=null;
		}
	catch(err) {
		console.log("catching error close", err);
	    }
	}
}

async function ws_onopen() {
  //console.log("In onopen");
  document.getElementById("ws_state").innerHTML = "<span style='color:blue'>CONNECTED</span>";
  document.getElementById("bt_connect").innerHTML = "Disconnect";
  document.getElementById("main_connect").innerHTML = "Disconnect";
  document.getElementById("chat-messages").innerHTML = "";

  //memRequest(0);
  //await sleep(600);
  //populategsData();
}

function ws_onerror(event) {
	console.log("ws error", event);
	event.preventDefault();

}
function mng_ws_errors(event) {
	var reason;
	// See https://www.rfc-editor.org/rfc/rfc6455#section-7.4.1
	if (event.code == 1000)
	    reason = "Normal closure, meaning that the purpose for which the connection was established has been fulfilled.";
	else if(event.code == 1001)
	    reason = "An endpoint is \"going away\", such as a server going down or a browser having navigated away from a page.";
	else if(event.code == 1002)
	    reason = "An endpoint is terminating the connection due to a protocol error";
	else if(event.code == 1003)
	    reason = "An endpoint is terminating the connection because it has received a type of data it cannot accept (e.g., an endpoint that understands only text data MAY send this if it receives a binary message).";
	else if(event.code == 1004)
	    reason = "Reserved. The specific meaning might be defined in the future.";
	else if(event.code == 1005)
	    reason = "No status code was actually present.";
	else if(event.code == 1006)
	   reason = "The connection was closed abnormally, e.g., without sending or receiving a Close control frame";
	else if(event.code == 1007)
	    reason = "An endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [https://www.rfc-editor.org/rfc/rfc3629] data within a text message).";
	else if(event.code == 1008)
	    reason = "An endpoint is terminating the connection because it has received a message that \"violates its policy\". This reason is given either if there is no other sutible reason, or if there is a need to hide specific details about the policy.";
	else if(event.code == 1009)
	   reason = "An endpoint is terminating the connection because it has received a message that is too big for it to process.";
	else if(event.code == 1010) // Note that this status code is not used by the server, because it can fail the WebSocket handshake instead.
	    reason = "An endpoint (client) is terminating the connection because it has expected the server to negotiate one or more extension, but the server didn't return them in the response message of the WebSocket handshake. <br /> Specifically, the extensions that are needed are: " + event.reason;
	else if(event.code == 1011)
	    reason = "A server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request.";
	else if(event.code == 1015)
	    reason = "The connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified).";
	else
	    reason = "Unknown reason";
	
	return(reason);
}
function ws_onclose(event) {

  const reason = mng_ws_errors(event);
  update_text("closing websocket "+ " ("+event.code+")"); 
  console.log("In onclose websocket "+ reason);

  ws = null;

  if (event.code != 1000) {
    //console.log("error", reason);
    //console.log("trying to reopening websocket "+ws+ws.url);
    console.log("Inside onclose "+ " ("+event.code+")");
    update_text("reopening websocket "+ " ("+event.code+")"); 
    connect_onclick();
	return;
  }
  //ws.onopen = null;
  //ws.onclose = null;
  //ws.onmessage = null;

  document.getElementById("ws_state").innerHTML = "<span style='color:gray'>CLOSED</span>";
  document.getElementById("bt_connect").innerHTML = "Connect";
  document.getElementById("main_connect").innerHTML = "Connect";
}
function ws_oncloseforced(event) {

  const reason = mng_ws_errors(event);
  update_text("closing websocket forced"+ " ("+event.code+")"); 
  console.log("In oncloseforced websocket "+ reason);

  ws = null;

  document.getElementById("ws_state").innerHTML = "<span style='color:gray'>CLOSED</span>";
  document.getElementById("bt_connect").innerHTML = "Connect";
  document.getElementById("main_connect").innerHTML = "Connect";
}

function blobToByteArray(blob) { 
	return new Promise((resolve, reject) => { 
		const reader = new FileReader(); 
		reader.readAsArrayBuffer(blob); 
		reader.onload = () => { 
			const arrayBuffer = reader.result; 
			const byteArray = new Uint8Array(arrayBuffer); 
			resolve(byteArray); }; 
		reader.onerror = reject; 
	}); 
}

var timerRef;
var supervisionState = "Unknown";
async function manageFrame(frameTyp, frameArray) {
	switch(frameTyp) {
		case 64:
			//acknowledge of reset req 2 bytes
			update_text('reset ack frame: '+frameArray);
			console.log("reset ack");
			OnResetReceived(frameArray);
			//memRequest(0);
			//await sleep(300);
			//memRequest(1);
			//await sleep(300);
			if (frameArray[1]==132 || frameArray[1]==200) {
				supervisionState ="Supervision is ON";
				//document.getElementById("supervision-btnId").innerHTML = "Stop Supervision";
				
				
			}
			else {
				supervisionState ="Supervision is OFF";
				//document.getElementById("supervision-btnId").innerHTML = "Start Supervision";
				
			}
			//document.getElementById("supervision-statusId").innerHTML = supervisionState;
			
			break;
	    case 65:
			dsplf0(sevenseg2value(frameArray[0]), "Z101");
			dsplf0(sevenseg2value(frameArray[1]), "Z102");
			dsplf0(sevenseg2value(frameArray[2]), "Z103");
			dsplf0(sevenseg2value(frameArray[3]), "Z104");
			dsplf0(sevenseg2value(frameArray[4]), "Z400");
			dsplf0(sevenseg2value(frameArray[5]), "Z401");
			dsplf0(sevenseg2value(frameArray[6]), "Z402");
			//console.log("code 65: ", frameArray);
			//console.log(frameArray[0], ": Z101");
			//console.log(frameArray[1], ": Z102");
			//console.log(frameArray[2], ": Z103");
			//console.log(frameArray[3], ": Z104");
			
			
			const acols = 8;
			const arows = 10;
			for (let r=0; r<arows; r++) {
				for (let c=0; c<acols; c++) {
					let idx = r+10*(7-c);
				    let ledElem = document.getElementById("sm-"+idx);

					if (frameArray[7+r]&(1<<c))
						ledElem.setAttribute("class",  "cled led-yellow");
					else
						ledElem.setAttribute("class",  "cled led-black border border-3");
					}

				
				}
			
			
	        break;
	    case 66:
			var dspl_zone = document.getElementById("dsplB-zone");
			//dspl_zone.innerHTML = frameArray;
			affdspl(66, frameArray);
			break;
	    case 82:
	        //read 128 bytes ram
			//var dspl_zone = document.getElementById("dsplB-zone");
			//dspl_zone.innerHTML = frameArray;
			console.log("128 bytes ram");
			console.log(frameArray);
			OnDumpReceived(frameArray);
			break;
	  	case 83:
	  	    //switch matrix
			console.log("switches: ", frameArray);
			var dspl_zone = document.getElementById("83-zone");
			//dspl_zone.innerHTML = frameArray;
			const cols = 8;
			const rows = 10;
			for (let r=0; r<rows; r++) {
				for (let c=0; c<cols; c++) {
					let idx = r+10*c;
				    let ledElem = document.getElementById("sm-"+idx);

					if (frameArray[r]&(1<<c))
						ledElem.setAttribute("class",  "cled led-yellow");
					else
						ledElem.setAttribute("class",  "cled led-black border border-3");
					}

				
				}
			break;
	  	case 89:
	  	    //ports abcd
			//var dspl_zone = document.getElementById("89-zone");
			//dspl_zone.innerHTML = frameArray;
			for (let i=0; i<8; i++) {
				let ledElem = document.getElementById(patooltip[i]+"pa-bar");
				//console.log('frame '+ ' ' + frameArray[byten]+ ' '+ (frameArray[byten]&&(1<<(i%8))) +' '+byten +' '+ i);
				if ( frameArray[0]&(1<<(i%8)) ) {
					ledElem.setAttribute("class",  "led led-green");
					}
				else {
					ledElem.setAttribute("class",  "led led-black border border-3");
					}
				}
			for (let i=0; i<8; i++) {
				let ledElem = document.getElementById(pbtooltip[i]+"pb-bar");
				//console.log('frame '+ ' ' + frameArray[byten]+ ' '+ (frameArray[byten]&&(1<<(i%8))) +' '+byten +' '+ i);
				if ( frameArray[1]&(1<<(i%8)) ) {
					ledElem.setAttribute("class",  "led led-green");
					}
				else {
					ledElem.setAttribute("class",  "led led-black border border-3");
					}
				}
			for (let i=0; i<8; i++) {
				let ledElem = document.getElementById(pctooltip[i]+"pc-bar");
				//console.log('frame '+ ' ' + frameArray[byten]+ ' '+ (frameArray[byten]&&(1<<(i%8))) +' '+byten +' '+ i);
				if ( frameArray[2]&(1<<(i%8)) ) {
					ledElem.setAttribute("class",  "led led-green");
					}
				else {
					ledElem.setAttribute("class",  "led led-black border border-3");
					}
				}
					
			for (let i=0; i<8; i++) {
				let ledElem = document.getElementById(pdtooltip[i]+"pd-bar");
				//console.log('frame '+ ' ' + frameArray[byten]+ ' '+ (frameArray[byten]&&(1<<(i%8))) +' '+byten +' '+ i);
				if ( frameArray[3]&(1<<(i%8)) ) {
					ledElem.setAttribute("class",  "led led-green");
					}
				else {
					ledElem.setAttribute("class",  "led led-black border border-3");
					}
				}
									
			break;		
		case 90:		
	        //read 2 bytes. in Reply to the 5A request
			//Fletcher code
			//dspl_zone.innerHTML = frameArray;
			console.log("received 2 bytes fletcher", frameArray);
			OnFletcherReceived(frameArray);
			break;
		case 120:
			//RSSI frame (free running from server)
			//console.log("received 4 bytes RSSI", frameArray);
			const rssi = ((frameArray[3]) << 24)
			     | ((frameArray[2]) << 16)
			     | ((frameArray[1]) << 8)
			     | ((frameArray[0]));	
			if (rssi < -80)		
				document.getElementById("rssi_state").innerHTML = `<span class="bg-danger text-white">&nbsp;<i class="bi bi-wifi-1"></i>&nbsp;${rssi} dB&nbsp;</span>`;
			else if (rssi < -60)
				document.getElementById("rssi_state").innerHTML = `<span class="bg-info text-white">&nbsp;<i class="bi bi-wifi-2"></i>&nbsp;${rssi} dB&nbsp;</span>`;
			else if (rssi > 0)
				document.getElementById("rssi_state").innerHTML = '<span class="bg-secondary text-white">&nbsp;Error&nbsp;</span>';
			else
				document.getElementById("rssi_state").innerHTML = `<span class="bg-success text-white">&nbsp;<i class="bi bi-wifi"></i>&nbsp;${rssi} dB&nbsp;</span>`;

			try {
				clearTimeout(timerRef);
				}
			catch(err) {
				}
			timerRef = setTimeout(function() {
				document.getElementById("rssi_state").innerHTML = '<span class="bg-secondary text-white">&nbsp;???&nbsp;</span>';
			}, 8000);
						
			break;
	    default:
	        break;
	    }     //switch  	
	
}

var startOfFrame = true;
var frameArray;
var frameIdx = 0;
var frameTyp = 0;
var framesz = 0;
function handle_ba(ba) {
  var idx = 0; 
  while (idx < ba.length) {
	  if (startOfFrame == true) {
          frameTyp = ba[idx];
		  startOfFrame = false;
		  frameIdx = 0;
	      switch(frameTyp) {
		      case 64:
			      //update_text('display A frame '+idx+' '+ frameIdx+ ' ' + ba.length);
			      framesz = 2;
			      frameArray = new Uint8Array(framesz);
			      break;
		      case 65:
			      //update_text('display A frame '+idx+' '+ frameIdx+ ' ' + ba.length);
			      framesz = 17;
			      frameArray = new Uint8Array(framesz);
			      break;
			  case 66:
			      //update_text('display B frame '+idx+' '+ frameIdx+ ' ' + ba.length);
			      framesz = 9;
			      frameArray = new Uint8Array(framesz);
			      break;
			  case 82:
			  	  //128 bytes ram fram
				  //update_text('ram dump 128 bytes '+idx+' '+ frameIdx+ ' ' + ba.length);
				  framesz = 128;
				  frameArray = new Uint8Array(framesz);
				  break;
			  case 83:
				  //update_text('display B frame '+idx+' '+ frameIdx+ ' ' + ba.length);
				  framesz = 5;
				  frameArray = new Uint8Array(framesz);
				  break;
			  case 89:
			      //update_text('display B frame '+idx+' '+ frameIdx+ ' ' + ba.length);
			      framesz = 4;
			      frameArray = new Uint8Array(framesz);
			      break;
			  case 90:
				  //update_text('display B frame '+idx+' '+ frameIdx+ ' ' + ba.length);
				  framesz = 2;
				  frameArray = new Uint8Array(framesz);
				  break;
		      case 120:
		      	  framesz = 4;
				  frameArray = new Uint8Array(framesz);
				  break;
	          default:
	          	  //console.log(frameTyp+"default frame");
			  	  startOfFrame = true;
	              break;
	          }     //switch   
		   idx = idx+1;	
      	   }        //if start of frame
	    else {
			var left2write = framesz-frameIdx;
			var leftInba   = ba.length - idx;
			var tobeWritten = Math.min(left2write, leftInba);
			for (var n=0; n<tobeWritten; n++) {
				frameArray[frameIdx++] = ba[idx++];
			}
			if (frameIdx >= framesz) {
				//update_text('frame typ '+frameTyp+". "+frameArray);
				manageFrame(frameTyp, frameArray);
				//console.log("frame typ: "+frameTyp+". "+frameArray);
				startOfFrame = true;
			}
		}  //if not start of frame
	}
}

function ws_onmessage(e_msg) {
  e_msg = e_msg || window.event; // MessageEvent
  //console.log(e_msg.data);
  //update_text('<span style="color:blue">' + e_msg.data + '</span>');

  //blobToByteArray(e_msg.data) .then(byteArray => { console.log(byteArray); update_text('<span style="color:green">' + byteArray + '</span>'); handle_ba(byteArray)}) .catch(error => console.error(error));
  blobToByteArray(e_msg.data) .then(byteArray => {  handle_ba(byteArray)}) .catch(error => console.error(error));


}
</script>

</head>
<body > <!-- class="bg-secondary"> -->

<div class="container p-3 my-3 rounded border border-3 shadow p-4 mb-4 bg-white">
	<h3>Control</h3>

  <div class="d-flex justify-content-between mb-0">
      <div class="px-2 "><span class="label">Connection: <span id="ws_state"></span></span></div>
      <div class="px-2 "><span class="label small">Signal strength: <span id="rssi_state"></span></span></div>
  </div>
    <!--<div><span class="label">Connection: <span id="ws_state"></span></span><span class="label text-end">RSSI: <span id="rssi_state"></span></span></div>-->
    <div class="user-input">
      <button class="connect-button" id="main_connect" onclick="connect_onclick()">Connect</button>
      <!--<input form="connect-formId" type="text" id="hostname" placeholder="wiflip_xyzt">-->
    <form id="connect-formId">
      <input form="connect-formId" type="text" id="hostname" placeholder="wiflip_xyzt" >
    </form>
    </div>


 <script>
   const x = localStorage.getItem("ls-hostname"); 
 
document.getElementById("hostname").value = x;
</script>

	    	
    <div class="user-input mt-3">
      <!--<button onclick="sendmsg_onclick('YCXQZ')">Reset</button>-->
      <button onclick="sendmsg_onclick(new Uint8Array([89, 67, 88, 81, 90]))">Reset</button>
	</div>



	
</div>	

<!-- The Modal -->
<div class="modal" id="reprog-myModal" tabindex='-1'>
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title" id="modal-title-id">Reprogramming done</h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <!-- Modal body -->
      <div class="modal-body" id="modal-body-id">
        success
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="submit" class="btn btn-success" id="modal-button-id" data-bs-dismiss="modal">OK</button>
      </div>

    </div>
  </div>
</div>
<!-- end of modal -->

<div class="container p-3 my-3 rounded border border-3">
	<h3>Z101..Z104</h3>
	<div class="col-8 fs-1 d-inline">
		<div id="Z101" class="d-inline border font-monospace">8</div>
		<div id="Z102" class="d-inline border font-monospace">8</div>
		<div id="Z103" class="d-inline border font-monospace">8</div>
	    <div id="Z104" class="d-inline border font-monospace">8</div>
	</div>
	<h3 class="mt-3">Z402..Z400</h3>
	<div class="col-8 fs-1 d-inline">
		<div id="Z402" class="d-inline border font-monospace">8</div>
		<div id="Z401" class="d-inline border font-monospace">8</div>
		<div id="Z400" class="d-inline border font-monospace">8</div>
	</div>
</div>

<div class="container p-3 my-3 bg-dark text-white rounded">
	<h3>Port A </h3>
	<div class="overflow-scroll led-bar-container ">

		<div id="pa-bar" class="d-inline-flex p-1 bg-secondary "> 
		</div>
	</div>
	<h3>Port B </h3>
	<div class="overflow-scroll led-bar-container ">

		<div id="pb-bar" class="d-inline-flex p-1 bg-secondary "> 
		</div>
	</div>
	<h3>Port C </h3>
	<div class="overflow-scroll led-bar-container ">

		<div id="pc-bar" class="d-inline-flex p-1 bg-secondary "> 
		</div>
	</div>
	<h3>Port D </h3>
	<div class="overflow-scroll led-bar-container ">

		<div id="pd-bar" class="d-inline-flex p-1 bg-secondary "> 
		</div>
	</div>

</div>	
<script>create_ledbar(patooltip, "pa-bar")</script>
<script>create_ledbar(pbtooltip, "pb-bar")</script>
<script>create_ledbar(pctooltip, "pc-bar")</script>
<script>create_ledbar(pdtooltip, "pd-bar")</script>


<div class="container shadow">

<!--<div id="switch-matrix-window" class="container p-3 my-3 bg-dark text-white rounded"> -->
<div id="switch-matrix-window" class="p-3 my-3 bg-dark text-white rounded">
    
	<h3>Rowe Switch matrix </h3>

	<div class="container shadow">
		
		
		<input type="radio" class="btn-check" name="options-outlined" id="success-outlined" autocomplete="off"  onclick="sendmsg_onclick(new Uint8Array([89, 67, 88, 81, 0x32]))">
		<label class="btn btn-outline-success" for="success-outlined">Real Switch Matrix</label>

		<input type="radio" class="btn-check" name="options-outlined" id="danger-outlined" autocomplete="off" onclick="sendmsg_onclick(new Uint8Array([89, 67, 88, 81, 0x31]))">
		<label class="btn btn-outline-danger" for="danger-outlined">Simulated Switch Matrix</label>
	</div>
		
	  
	  
	  
	<div class="row mt-3">
	<!--
	<div class="col-1"></div>
	<div class="col-1"><div class="border text-center">0</div></div>
	<div class="col-1"><div class="border text-center">1</div></div>
	<div class="col-1 text-center"><div class="border border-1">2</div></div>
	<div class="col-1 text-center"><div class="border border-1">3</div></div>
	<div class="col-1 text-center"><div class="border border-1">4</div></div>
	<div class="col-1 text-center"><div class="border border-1">5</div></div>
	<div class="col-1 text-center"><div class="border border-1">6</div></div>
	<div class="col-1 text-center"><div class="border border-1">7</div></div>
	<div class="col-1 text-center"><div class="border border-1">8</div></div>
	<div class="col-1 text-center"><div class="border border-1">9</div></div>
	-->
	<div class="col-1"></div>
	<div class="col-1"><div class="border text-center">0</div></div>
	<div class="col-1"><div class="border text-center">1</div></div>
	<div class="col-1"><div class="border text-center">2</div></div>
	<div class="col-1"><div class="border text-center">3</div></div>
    <div class="col-1"><div class="border text-center">4</div></div>
    <div class="col-1"><div class="border text-center">5</div></div>
    <div class="col-1"><div class="border text-center">6</div></div>
    <div class="col-1"><div class="border text-center">7</div></div>
	</div>

</div>	
</div>
<script>window.onload = create_rowe_switch_matrix("switch-matrix-window")</script>



<!--general purpose toast-->
<div class="position-fixed top-0 end-0 p-3" style="z-index: 11">
  <div id="liveToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
      <!--<img src="bootstrap-icons-1.13.1/cpu-fill.svg" class="rounded me-2" alt="icon header">-->
      <img src="./cpu-fill.svg" class="rounded me-2" alt="icon header">
      <strong class="me-auto" id="imgTitle-toastId">Bootstrap</strong>
      <small  id="timeInfo-toastId">11 mins ago</small>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body" id="main-toastId">
      Hello, world! This is a toast message.
    </div>
  </div>
</div>
<!--end of toast-->

  </div>
</div>





<div class="container p-3 my-3 bg-dark text-white rounded">
    <h3>WiFlip (ws console)</h3>
    <div class="websocket">
      <button class="connect-button" id="bt_connect" onclick="connect_onclick()">Connect</button>
      <!-- <span class="label">WebSocket: <span id="ws_state"><span style="color:blue">CLOSED</span></span></span> -->
    </div>
    <div class="chat-messages" id="chat-messages"></div>
    <!--
    <div class="user-input">
      <input type="text" id="message" placeholder="Type your message...">
      <button onclick="send_onclick()">Send</button>
    </div>
    -->

</div>


<div class="container  d-flex align-items-center justify-content-center shadow p-4 mb-4 bg-white">
    <img src="./wifliplogo.png" class="rounded me-2 w-25" alt="icon wiflip logo"> 
</div>
<div class="container  d-flex align-items-center justify-content-center shadow p-4 mb-4 bg-white">
<p class="small">C3C Companion Version 0.91.0b 2025-10-25</p>
</div>



<!--	
<iframe src="wswiflip.html?interframe=true" style="height:380px;width:50%" title="Iframe Example"></iframe>	
-->

<!--	
<iframe src="wswiflip.html?interframe=true" style="height:380px;width:50%" title="Iframe Example"></iframe>	
-->
<!--Activation of basic tooltips (tooltip0)-->
<!--The other tooltips (from gamesettings) are tooltip (without 0) -->
<!--They do not exist until the game settings are actually opened -->
<!--This is why we have two kinds of tooltips (see in gamesettings.js)...-->
<script>
var tooltip1TriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
var tooltip1List = tooltip1TriggerList.map(function (tooltipTriggerEl) {
  return new bootstrap.Tooltip(tooltipTriggerEl)
})

</script>


</body></html>